<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
	<th:block th:include="include :: header('生产通知单确认页')" />
</head>
<body class="gray-bg">
     <div class="container-div">
		 <div class="btn-group-sm" id="toolbar" role="group">
			 <a class="btn btn-danger multiple disabled" onclick="removeRow()">
				 <i class="fa fa-remove"></i> 删除选择行
			 </a>
		 </div>
		<div class="row">
			<div class="col-sm-12 select-table table-striped">
				<table id="bootstrap-table"></table>
			</div>
		</div>
	</div>
    <div th:include="include :: footer"></div>
    <script th:inline="javascript">
		var prefix = ctx + "order/orderinfo";
        //var prefix = ctx + "demo/table";
        //var datas = [[${@dict.getType('sys_normal_disable')}]];
		// 获取 URL 中的参数
		function getUrlParameter(name) {
			name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
			var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
			var results = regex.exec(location.search);
			return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
		}
		// 获取 ids 参数的值
		var ids = getUrlParameter('ids');

		//var dataString = /*[[${rfOrder}]]*/ [];
		//var dataObject = JSON.parse(dataString);
		//console.log(ids);
        $(function() {
            var options = {
				url: prefix + "/pro_notice_confirm_list",
				queryParams: {ids:ids},
		        showSearch: false,
		        showRefresh: false,
		        showToggle: false,
		        showColumns: false,
				columns: [
					{
						checkbox: true
					},
					{
						field: 'id',
						title: '主键id',
						visible: false
					},
					{
						field: 'purchaseName',
						title: '客户名称',
						visible: false
					},
					{
						field: 'purchaseDate',
						title: '采购日期',
						visible: false
					},


					{
						field: 'productNameCn',
						title: '产品名称'
					},
					{
						field: 'productNameEn',
						title: '规格型号'
					},
					{
						field: 'material',
						title: '材质'
					},
					{
						field: 'unpaidNum',
						title: '数量'
					},
					{
						field: 'material_standards',
						title: '用料规格'
					},
					{
						field: 'material_weight',
						title: '毛坯重量'
					},
					{
						field: 'product_weight',
						title: '产品净重'
					},
					{
						field: 'amount',
						title: '总数量',
						visible: false
					},
					{
						field: 'unit',
						title: '单位',
						visible: false
					},
					{
						field: 'price',
						title: '单价',
						visible: false
					},
					{
						field: 'needTime',
						title: '交货时间'
					},
					{
						field: 'paidNum',
						title: '已交',
						visible: false
					},

					{
						field: 'orderFrom',
						title: '请购',
						visible: false
					},
					{
						field: 'orderNum',
						title: '订单号'
					},
					{
						field: 'remark',
						title: '备注'
					}
					]
            };
            $.table.init(options);
        });
		/* 删除指定表格行 */
		function removeRow(){
			var ids = $.table.selectColumns("id");
			if (ids.length == 0) {
				$.modal.alertWarning("请至少选择一条记录");
				return;
			}
			$("#" + table.options.id).bootstrapTable('remove', {
				field: 'id',
				values: ids
			})
		}
        /* 添加用户-选择用户-提交 */
		function submitHandler() {
			var rows = $.table.selectFirstColumns();
			if (rows.length == 0) {
       			$.modal.alertWarning("请至少选择一条记录");
       			return;
       		}
			alert(rows.join());
		}
    </script>
</body>
</html>